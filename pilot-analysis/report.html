<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-11-02">

<title>Pilot Survey analysis for RFID-In-Me</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="report_files/libs/clipboard/clipboard.min.js"></script>
<script src="report_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="report_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="report_files/libs/quarto-html/popper.min.js"></script>
<script src="report_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="report_files/libs/quarto-html/anchor.min.js"></script>
<link href="report_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="report_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="report_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="report_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="report_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#abstract" id="toc-abstract" class="nav-link active" data-scroll-target="#abstract">Abstract</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#sample-description" id="toc-sample-description" class="nav-link" data-scroll-target="#sample-description">Sample Description</a></li>
  <li><a href="#data-cleaning" id="toc-data-cleaning" class="nav-link" data-scroll-target="#data-cleaning">Data Cleaning</a></li>
  <li><a href="#modeling" id="toc-modeling" class="nav-link" data-scroll-target="#modeling">Modeling</a>
  <ul class="collapse">
  <li><a href="#model-summary" id="toc-model-summary" class="nav-link" data-scroll-target="#model-summary">Model Summary</a></li>
  </ul></li>
  <li><a href="#power-analysis" id="toc-power-analysis" class="nav-link" data-scroll-target="#power-analysis">Power Analysis</a></li>
  </ul></li>
  <li><a href="#changes-to-final-survey" id="toc-changes-to-final-survey" class="nav-link" data-scroll-target="#changes-to-final-survey">Changes to Final Survey</a></li>
  <li><a href="#appendix" id="toc-appendix" class="nav-link" data-scroll-target="#appendix">Appendix</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pilot Survey analysis for RFID-In-Me</h1>
<p class="subtitle lead">By: Abdullah, Bogdan, Collin, and Jeb</p>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 2, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Write your report content here.</p>
<p>Make sure you update the settings in the YAML for your report.</p>
<p>Use <a href="https://commonmark.org/help/">markdown</a> for formatting, e.g.: <strong>Bold</strong>, <em>Italic</em>, etc.</p>
<p>Here are some section headers to use:</p>
<section id="abstract" class="level1">
<h1>Abstract</h1>
<p>The pilot survey explores consumer preferences in regards to RFID devices in various form factors. The survey consists of six 3-alternative randomized conjoint choices and our multinomial logit model estimates beta values for type, price, compatibility, capacity, and range. However, no coefficients reached any meaningful significance most likely due to the sample size. We interpret these results as evidence that more observations are needed and a few wording/formatting choices likely caused attribute ambiguity. We outline concrete revisions to the survey and a power-analysis-based sample target to improve precision in the full launch.</p>
</section>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Radio-Frequency Identification (RFID) technologies enable short-range, contactless exchange of information between a passive tag and an active reader. This capability simplifies payments in consumer settings, building access, and digital ID storage across multiple of form factors (e.g., rings, bracelets, cards, and implants). Adoption has remained quite limited, especially for more invasive procedures such as implants due to reasons such as consumer trust.</p>
<p>We focus on four questions:</p>
<ul>
<li><p>RQ1: What factors most influence willingness to adopt RFID devices?</p></li>
<li><p>RQ2: Do people show a baseline reluctance toward implants relative to non-invasive form factors?</p></li>
<li><p>RQ3: What kinds of benefits (e.g., convenience or flexibility) seem to offset reluctance?</p></li>
<li><p>RQ4: What refinements to wording, framing, or visuals are needed before a full launch?</p></li>
</ul>
<p>The remainder of the report summarizes the pilot sample, key findings, and the changes we’ll make ahead of the main study.</p>
<p><img src="figs/questionexample.jpg" class="img-fluid" alt="Example Question"> # Pilot Data Analysis</p>
<section id="sample-description" class="level2">
<h2 class="anchored" data-anchor-id="sample-description">Sample Description</h2>
<p>Our initial survey was disseminated to peers in the classroom for question. In total our team received 23 responses, while cleaning the survey only 18 responses remained; this will be elaborated further in the data cleaning portion.</p>
<p>Each survey contained 6 choice questions pulled randomly from out design matrix. Thus from these 18 valid surveys, 108 choice questions were completed.</p>
<p>Given our team was looking to explore the RFID communications market for consumers with an emphasis on <em>injectables</em> a younger target audience was the goal. Looking at our survey we had an average respondent age of 23.3, a fairly young group which is exactly what we we’re aiming for. This age group is more open to new technology ideas that may seem radical to an older environment.</p>
</section>
<section id="data-cleaning" class="level2">
<h2 class="anchored" data-anchor-id="data-cleaning">Data Cleaning</h2>
<p>Data cleaning solely involved mutating the provided data cleaning folder provided by Professor Helveston. This process involves finding question completion times and creating basic filters to dwindle down the sample group (the 23-&gt;18 drop we saw earlier). These filters include answering the same for every question to completing the question too quickly. From here our cleaned data can be modeled to see if any actionable information comes from this survey.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cleaned Data </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(choice_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 6 × 17
#&gt;   session_id respID   qID profileID altID obsID choice time_total time_cbc_total
#&gt;   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;
#&gt; 1 87a62be70…      1     1        16     1     1      1        187             22
#&gt; 2 87a62be70…      1     1       249     2     1      0        187             22
#&gt; 3 87a62be70…      1     1        88     3     1      0        187             22
#&gt; 4 87a62be70…      1     2         6     1     2      1        187             22
#&gt; 5 87a62be70…      1     2       285     2     2      0        187             22
#&gt; 6 87a62be70…      1     2       288     3     2      0        187             22
#&gt; # ℹ 8 more variables: screenout &lt;chr&gt;, time_min_total &lt;dbl&gt;,
#&gt; #   time_min_cbc &lt;dbl&gt;, price &lt;dbl&gt;, capacity &lt;dbl&gt;, range &lt;dbl&gt;, type &lt;chr&gt;,
#&gt; #   compatability &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="modeling" class="level2">
<h2 class="anchored" data-anchor-id="modeling">Modeling</h2>
<p>The model of choice for this analysis is the Multinomial Logistic Regression model. This model is an extension of the classic logistic regression model where answers to questions follow two possible outcomes. Meanwhile multinomial works above this case where an answer, while discrete, may have more than two categories. For example, in our pilot survey our price category has values of 25, 50, and 100.</p>
<p>This model also differs from regular regression in the senses that we are trying to maximize likelihood instead of minimizing Mean Square Error as usual. Utilizing the logitR package the following co-efficients were reached for our utility function.</p>
<p><strong>Eq(1) - MNLR Model</strong> <span class="math display">\[ Pr(Y\_{i} = k) = \frac{e^{\beta_{k}*\mathbf{X}_i}}{1+ \sum_{j = 1}^{K - 1}e^{\beta_{j}*\mathbf{X}_i}}, 1\leq k\leq K\]</span></p>
<section id="model-summary" class="level3">
<h3 class="anchored" data-anchor-id="model-summary">Model Summary</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; =================================================
#&gt; 
#&gt; Model estimated on: Sun Nov 02 16:16:49 2025 
#&gt; 
#&gt; Using logitr version: 1.1.2 
#&gt; 
#&gt; Call:
#&gt; logitr(data = data, outcome = "choice", obsID = "obsID", pars = c("price", 
#&gt;     "capacity", "range", "type", "compatability"))
#&gt; 
#&gt; Frequencies of alternatives:
#&gt;       1       2       3 
#&gt; 0.30556 0.40741 0.28704 
#&gt; 
#&gt; Exit Status: 3, Optimization stopped because ftol_rel or ftol_abs was reached.
#&gt;                                 
#&gt; Model Type:    Multinomial Logit
#&gt; Model Space:          Preference
#&gt; Model Run:                1 of 1
#&gt; Iterations:                   11
#&gt; Elapsed Time:        0h:0m:0.03s
#&gt; Algorithm:        NLOPT_LD_LBFGS
#&gt; Weights Used?:             FALSE
#&gt; Robust?                    FALSE
#&gt; 
#&gt; Model Coefficients: 
#&gt;                            Estimate Std. Error z-value Pr(&gt;|z|)
#&gt; price                     0.0054443  0.0040022  1.3603   0.1737
#&gt; capacity                 -0.0075711  0.0735753 -0.1029   0.9180
#&gt; range                     0.1086555  0.3412924  0.3184   0.7502
#&gt; typeCard                  0.0013698  0.3377584  0.0041   0.9968
#&gt; typeImplantable           0.2087229  0.3230056  0.6462   0.5182
#&gt; typeRing                  0.4598485  0.3434822  1.3388   0.1806
#&gt; compatabilityiOS         -0.1642804  0.2951555 -0.5566   0.5778
#&gt; compatabilityiOS/Android -0.3084493  0.3024405 -1.0199   0.3078
#&gt;                                      
#&gt; Log-Likelihood:         -116.51926917
#&gt; Null Log-Likelihood:    -118.65012718
#&gt; AIC:                     249.03853835
#&gt; BIC:                     270.49560000
#&gt; McFadden R2:               0.01795917
#&gt; Adj McFadden R2:          -0.04946596
#&gt; Number of Observations:  108.00000000</code></pre>
</div>
</div>
<p>From this simple summary we can extract key information that points to a single conclusion. Using an alpha level of 0.05, or even 0.1 not a single parameter is deemed significant. Even though standard error for all parameters fall around 0 for each attribute our P-values tells us all of our responses are junk when making any real conclusions.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="figs/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="696"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="power-analysis" class="level2">
<h2 class="anchored" data-anchor-id="power-analysis">Power Analysis</h2>
<p>We based our power analysis on the following priors:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Attribute</th>
<th>Level/Category</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Type</strong></td>
<td>Implantable</td>
<td>Baseline</td>
</tr>
<tr class="even">
<td></td>
<td>Ring</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>Bracelet</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>Card</td>
<td>2</td>
</tr>
<tr class="odd">
<td><strong>Price</strong></td>
<td>—</td>
<td>-0.1</td>
</tr>
<tr class="even">
<td><strong>Compatibility</strong></td>
<td>iOS</td>
<td>Baseline</td>
</tr>
<tr class="odd">
<td></td>
<td>Android</td>
<td>-1</td>
</tr>
<tr class="even">
<td></td>
<td>iOS/Android</td>
<td>1</td>
</tr>
<tr class="odd">
<td><strong>Capacity</strong></td>
<td>—</td>
<td>1</td>
</tr>
<tr class="even">
<td><strong>Range</strong></td>
<td>—</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Our team has concluded that our sample size should be approximately 75 respondents. This decision is derived from the following plots.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/poweranalysis.jpg" class="img-fluid figure-img"></p>
<figcaption>Power Analysis</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/standarderror.jpg" class="img-fluid figure-img"></p>
<figcaption>Standard Error</figcaption>
</figure>
</div>
<p>At 50 respondents, all of the attributes are above the 80% power threshold, but several of the attributes are between 0.35 to 0.45. At n = 75, not only are all attributes high above the 80%, but all attributes are below 0.35. While we may be able to obtain more precise measurements if we increase the sample size, the rate of return decreases significantly as we increase n after n = 75.</p>
<p>Our team also plans to use the ‘modfed’ algorithm instead of the random algorithm. The plots below show the results of our comparison between those two diagrams.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/powercomp.jpg" class="img-fluid figure-img"></p>
<figcaption>Power Comparison</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/standarderrorcomp.jpg" class="img-fluid figure-img"></p>
<figcaption>Standard Error Comparison</figcaption>
</figure>
</div>
<p>The majority of the plots show that the Modfed design is superior to the random design in both statistical power and standard error. There are a few exceptions in statistical power, but overall, the Modfed design will work better for our survey than the random design.</p>
</section>
</section>
<section id="changes-to-final-survey" class="level1">
<h1>Changes to Final Survey</h1>
<p>Based on feedback from our pilot survey, we have decided to make a few changes to enhance our final survey. The first and easiest change we had to make was replacing the implant image. We felt that the original image used for the pilot survey did not accurately convey what the implant was. The first image made the implant look larger, scarier, and it was not clear how it would be used. The new image, while not showing the implant in detail, depicts it in a hand that displays its positioning and relative size far better. Another surface-level change suggested by a peer was to add an informational page to the survey, briefly explaining RFID technology and the idea of an implant. Our changes will not just be surface-level, because as we concluded in our model analysis, none of our attributes stood out as significant. We believe that this is due to a lack of people taking our survey. We do not believe that we will be able to reach the necessary sample size required to get accurate and insightful data using our current question design. To fix this, we are going us the Modfed experimental design as mentioned in our power analysis.</p>
</section>
<section id="appendix" class="level1">
<h1>Appendix</h1>
<p>Our survey begins with a statement describing the survey:</p>
<p>“This survey asks about your preferences for <strong>RFID technologies</strong> used for payment and identification — such as <strong>rings</strong>, <strong>bracelets</strong>, <strong>cards</strong>, or <strong>implants</strong>.”</p>
<p>We continue with a question that aims to gain consent from the respondent:</p>
<p>“This survey is being conducted by students at The George Washington University. We will not be collecting any identifying data, such as your name or address. The survey will take about 10–15 minutes. Your participation is voluntary and you may stop at any time.”</p>
<p>“I am age 18 or older” “Yes” “No”</p>
<p>“I have read and understand the above information”, “Yes” “No”</p>
<p>We then attempt to gauge respondents familiarity with RFID technology:</p>
<p>“If you are <strong>interested in alternatives to carrying a wallet</strong> (for payments or ID) using RFID technology, please select <strong>Interested</strong>.<br>
If you are <strong>not interested at all</strong>, select <strong>Not interested</strong>.”</p>
<p>“Overall, how interested are you in using RFID for payments or identification?”, “Interested” “Not interested”</p>
<p>Next, we describe the different attributes:</p>
<p>“Now that you’ve shared a bit about yourself, consider a scenario in which you can choose an <strong>RFID technology</strong> from a set of options with different attributes.</p>
<p>Price</p>
<p>The cost (USD) you would pay for the device.</p>
<p>Range</p>
<p>How far (in feet) a scanner can detect the RFID signal (e.g., 0.1, 0.5, or 1 ft).</p>
<p>Compatibility</p>
<p>Which phone ecosystem the device pairs with: <strong>iOS</strong>, <strong>Android</strong>, or <strong>Both</strong>.</p>
<p>Storage</p>
<p>How many digital ID tags can be stored (e.g., <strong>1</strong>, <strong>3</strong>, or <strong>5 Tags</strong>).</p>
<p>Type / Location</p>
<p>We will show several <strong>form factors</strong>: - <strong>Bracelet</strong> or <strong>Ring</strong> (wearables) - <strong>Card</strong> (wallet alternative) - <strong>Implant</strong> (subdermal location such as <strong>hand</strong>, <strong>wrist</strong>, or <strong>finger</strong>)”</p>
<p>The next step is to introduce our survey:</p>
<p>“On the next pages, you’ll see three RFID options. Choose the one you most prefer.</p>
<p>We will now show you 6 sets of choice questions starting on the next page.”</p>
<p>Next, we go into the survey itself. The below image is an example of a question respondents would see:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/questionexample.jpg" class="img-fluid figure-img"></p>
<figcaption>Example Question</figcaption>
</figure>
</div>
<p>The next step is to gather a little more information regarding the respondents:</p>
<p>“We’re almost done! We’d just like to ask just a few more questions about you which we will only use for analyzing our survey data.”</p>
<p>“(1) In what year were you born?”</p>
<p>“(2) What is your current gender identity?”</p>
<p>“Please let us know if you have any other thoughts or feedback on this survey.</p>
<p>Your feedback will help us make future improvements :)”</p>
<p>Finally, respondents are directed to the end page where they receive their completion code:</p>
<p>“The survey is finished. Thank you for your feedback!</p>
<p>Your completion code is: <strong>CODE HERE</strong></p>
<p>You may close the window now.”</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>